<h1>Tasks</h1>

<ul>
  <% @tasks.each do |task| %>
      <li><a href="/tasks/<%= task.id %>"><%= task.title %></a></li>

      <form action="/tasks/<% task.id %>" >
        <input type="hidden" name="_method" value="patch">
        <input type="hidden" name="task[done]" value="<%= task.done ? 0 : 1 %>"
        <input class="done-button" type="checkbox" <%= "checked" if task.done %>>
      </form>


      <script>
          $('.done-button').click(function() {$(this).parent('form').submit()})
      </script>


      <!--<form action="/tasks/<%= task.id %>" method="post">-->
        <!--<input name="_method" type="hidden" value="patch">-->
        <!--<input name="task[done]" type="hidden" value="true">-->
        <!--<button>Mark done</button>-->
      <!--</form>-->
  <% end %>
</ul>



<% if @task.errors.any? %>
    <p>Please fix these errors:</p>
    <ul>
      <% @task.errors.full_messages.each do |message| %>
          <li><%= message %></li>
      <% end %>
    </ul>
<% end %>


